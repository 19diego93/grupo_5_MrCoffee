<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../partials/head') %>
    <link rel="stylesheet" href="/css/users/profile.css" />
  </head>
  <body>
    <%- include('../partials/header') %>
    <main>
      <div class="contenedor-perfil">
        <div class="titulo-perfil">
          <h2>Configuraciones</h2>
          <div class="configs">
            <a href="/user/profile" class="profile-user">perfil</a>
            <a href="" class="profile-favorite">favoritos</a>
          </div>
        </div>

        <form
          action="/user/profile?_method=PUT"
          method="POST"
          enctype="multipart/form-data"
        >
          <div class="formulario-perfil">
            <div class="contenedor-img-perfil">
              <div class="img-perfil">
                <picture>
                  <img
                    id="view-new-upload-img"
                    src="/img/avatar/<%= user.image %>"
                    alt="imagen de usuario"
                  />
                </picture>
              </div>
              <div class="boton-nueva-img">
                <div>
                  <label>
                    <p>Subir archivo</p>
                    <input
                      type="file"
                      name="image"
                      id="file"
                      accept="image/*"
                    />
                  </label>
                </div>
                <% if(locals.errors && errors.image){ %>
                <p class="errors-t"><%= errors.image.msg %></p>
                <% } %>
              </div>
            </div>
            <div class="contenedor-input-perfil">
              <div class="estilos-input">
                <label for="first_name">Nombre</label>
                <input
                  placeholder="Introduzca su nombre"
                  id="first_name"
                  name="fname"
                  type="text"
                  class="<%= locals.errors && errors.fname ? 'is-invalid' : 'is-valid' %>"
                  value="<%= locals.oldData && oldData.fname ? oldData.fname : user.first_name %>"
                />
                <% if(locals.errors && errors.fname){ %>
                <div class="errors-t"><%= errors.fname.msg %></div>
                <% } %>
              </div>

              <div class="estilos-input">
                <label for="last_name">Apellido</label>
                <input
                  placeholder="Introduzca su apellido"
                  id="last_name"
                  name="lname"
                  type="text"
                  class="<%= locals.errors && errors.lname ? 'is-invalid' : 'is-valid' %>"
                  value="<%= locals.oldData && oldData.lname ? oldData.lname : user.last_name %>"
                />
                <% if(locals.errors && errors.lname){ %>
                <div class="errors-t"><%= errors.lname.msg %></div>
                <% } %>
              </div>

              <div class="estilos-input">
                <label for="email">Email</label>
                <input
                  placeholder="Introduzca su email"
                  id="email"
                  name="email"
                  type="email"
                  class="<%= locals.errors && errors.email ? 'is-invalid' : 'is-valid' %>"
                  value="<%= locals.oldData && oldData.email ? oldData.email : user.email %>"
                />
                <% if(locals.errors && errors.email){ %>
                <div class="errors-t"><%= errors.email.msg %></div>
                <% } %>
              </div>

              <div class="estilos-input">
                <label for="oldPassword">Contraseña actual</label>
                <input
                  placeholder="Introduzca su contraseña actual"
                  id="oldPassword"
                  name="oldPassword"
                  type="password"
                  class="<%= locals.errors && errors.oldPassword ? 'is-invalid' : 'is-valid' %>"
                />
                <% if(locals.errors && errors.oldPassword){ %>
                <div class="errors-t"><%= errors.oldPassword.msg %></div>
                <% } %>
              </div>

              <div class="estilos-input">
                <label for="newPassword">Nueva contraseña</label>
                <input
                  placeholder="Introduzca su nueva contraseña"
                  id="newPassword"
                  name="newPassword"
                  type="password"
                  class="<%= locals.errors && errors.newPassword ? 'is-invalid' : 'is-valid' %>"
                />
                <% if(locals.errors && errors.newPassword){ %>
                <div class="errors-t"><%= errors.newPassword.msg %></div>
                <% } %>
              </div>

              <div class="estilos-input">
                <label for="confirmNewPassword">Repite la contraseña</label>
                <input
                  placeholder="Repita su nueva contraseña"
                  id="confirmNewPassword"
                  name="confirmNewPassword"
                  type="password"
                  class="<%= locals.errors && errors.confirmNewPassword ? 'is-invalid' : 'is-valid' %>"
                />
                <% if(locals.errors && errors.confirmNewPassword){ %>
                <div class="errors-t"><%= errors.confirmNewPassword.msg %></div>
                <% } %>
              </div>
            </div>
          </div>

          <div class="contenedor-botones">
            <div class="perfil-input-submit">
              <input type="submit" value="Guardar" class="guardar-datos" />
            </div>

            <div class="perfil-input-submit">
              <input
                type="reset"
                value="restablecer"
                class="restablecer-datos"
              />
            </div>
          </div>
        </form>
      </div>
    </main>
    <%- include('../partials/footer') %>
    <script src="/js/img-preview.js" type="text/javascript"></script>
  </body>
</html>
